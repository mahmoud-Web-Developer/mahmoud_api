========================================
   دليل ربط الـ API بالموقع
========================================

## نعم، سيعمل الـ API مع الموقع المصور!

### 1. الـ API جاهز على Railway:
**Base URL:** https://mahmoudapi-production.up.railway.app

### 2. الـ APIs المتاحة:

#### Authentication APIs:
```
POST /auth/login - تسجيل الدخول
POST /auth/signup - تسجيل مستخدم جديد
```

#### Contact APIs:
```
POST /contact-requests - إرسال طلب تواصل
GET /contact-requests - جلب طلبات التواصل
```

#### Meeting APIs:
```
POST /meetings - حجز اجتماع
GET /meetings/slots - جلب أوقات متاحة
```

#### Brief APIs:
```
POST /briefs - إرسال Brief
GET /briefs - جلب Briefs
```

#### Content APIs:
```
GET /services - جلب الخدمات
GET /portfolio - جلب البورتفوليو
GET /news - جلب الأخبار
```

### 3. كيفية الربط في JavaScript:

#### مثال لطلب التواصل:
```javascript
async function submitContact() {
  const formData = {
    name: document.getElementById('contactName').value,
    email: document.getElementById('contactEmail').value,
    phone: document.getElementById('contactPhone').value,
    message: document.getElementById('contactMessage').value
  };

  try {
    const response = await fetch('https://mahmoudapi-production.up.railway.app/contact-requests', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(formData)
    });

    const result = await response.json();
    
    if (response.ok) {
      alert('تم إرسال طلبك بنجاح!');
    } else {
      alert('حدث خطأ في الإرسال');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('حدث خطأ في الاتصال');
  }
}
```

#### مثال لحجز اجتماع:
```javascript
async function bookMeeting() {
  const meetingData = {
    title: document.getElementById('meetingTitle').value,
    date: document.getElementById('meetingDate').value,
    time: document.getElementById('meetingTime').value,
    duration: document.getElementById('meetingDuration').value,
    description: document.getElementById('meetingDescription').value
  };

  try {
    const response = await fetch('https://mahmoudapi-production.up.railway.app/meetings', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(meetingData)
    });

    const result = await response.json();
    
    if (response.ok) {
      alert('تم حجز الاجتماع بنجاح!');
    } else {
      alert('حدث خطأ في الحجز');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('حدث خطأ في الاتصال');
  }
}
```

#### مثال لإرسال Brief:
```javascript
async function submitBrief() {
  const briefData = {
    title: document.getElementById('briefTitle').value,
    description: document.getElementById('briefDescription').value,
    budget: document.getElementById('briefBudget').value,
    timeline: document.getElementById('briefTimeline').value,
    requirements: document.getElementById('briefRequirements').value
  };

  try {
    const response = await fetch('https://mahmoudapi-production.up.railway.app/briefs', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(briefData)
    });

    const result = await response.json();
    
    if (response.ok) {
      alert('تم إرسال Brief بنجاح!');
    } else {
      alert('حدث خطأ في الإرسال');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('حدث خطأ في الاتصال');
  }
}
```

### 4. جلب البيانات للعرض:

#### جلب الخدمات:
```javascript
async function loadServices() {
  try {
    const response = await fetch('https://mahmoudapi-production.up.railway.app/services');
    const services = await response.json();
    
    // عرض الخدمات في الصفحة
    const servicesContainer = document.getElementById('services-container');
    servicesContainer.innerHTML = services.data.map(service => `
      <div class="service-card">
        <h3>${service.title}</h3>
        <p>${service.description}</p>
      </div>
    `).join('');
  } catch (error) {
    console.error('Error loading services:', error);
  }
}
```

#### جلب البورتفوليو:
```javascript
async function loadPortfolio() {
  try {
    const response = await fetch('https://mahmoudapi-production.up.railway.app/portfolio');
    const portfolio = await response.json();
    
    // عرض البورتفوليو في الصفحة
    const portfolioContainer = document.getElementById('portfolio-container');
    portfolioContainer.innerHTML = portfolio.data.map(item => `
      <div class="portfolio-item">
        <img src="${item.image}" alt="${item.title}">
        <h3>${item.title}</h3>
        <p>${item.description}</p>
      </div>
    `).join('');
  } catch (error) {
    console.error('Error loading portfolio:', error);
  }
}
```

### 5. اختبار الربط:

#### تشغيل الاختبارات:
```javascript
// في console المتصفح
node test-api-connection.js
```

#### أو في المتصفح:
```javascript
// إضافة الملف للصفحة
<script src="test-api-connection.js"></script>

// تشغيل الاختبارات
runAllTests();
```

### 6. الخطوات المطلوبة:

#### 1. إضافة JavaScript للصفحة:
```html
<script>
  // ربط النماذج بالـ API
  document.getElementById('contactForm').addEventListener('submit', submitContact);
  document.getElementById('meetingForm').addEventListener('submit', bookMeeting);
  document.getElementById('briefForm').addEventListener('submit', submitBrief);
  
  // تحميل البيانات عند تحميل الصفحة
  window.addEventListener('load', () => {
    loadServices();
    loadPortfolio();
    loadNews();
  });
</script>
```

#### 2. إضافة IDs للنماذج:
```html
<form id="contactForm">
  <input id="contactName" type="text" placeholder="Full Name">
  <input id="contactEmail" type="email" placeholder="Email">
  <input id="contactPhone" type="tel" placeholder="Phone">
  <textarea id="contactMessage" placeholder="Message"></textarea>
  <button type="submit">Send Message</button>
</form>
```

### 7. النتيجة:

**نعم، سيعمل الـ API مع الموقع المصور!**

- جميع الـ APIs جاهزة على Railway
- يمكن ربط النماذج بسهولة
- البيانات ستُحفظ في قاعدة البيانات
- يمكن عرض البيانات من الـ API

### 8. اختبار سريع:

```bash
curl https://mahmoudapi-production.up.railway.app/health
```

إذا عاد `{"success": true}`، فالـ API يعمل بشكل صحيح!

======================================== 